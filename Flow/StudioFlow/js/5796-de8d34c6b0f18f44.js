"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5796],{65796:function(e,t,n){n.d(t,{s:function(){return D}});var r=n(26042),l=n(69396),i=n(85893),a=n(67294),s=n(11163),o=n(60851),c=n(58385),u=n(47568),d=n(99534),f=n(828),m=n(29815),h=n(97582),x=n(85518),v=n(65033),g=n(57779),p=n(53650),b=n(99614),j=n(57935),w=n(28256),S=n(22377),C=n(83122),N=n(97224),k=n(3381),y=n(26074),Z=n(27330),_=n(14924),F=n(82203),R=n(4480),M=(0,R.cn)({key:"resetableStateAtom",default:{}});function E(e,t,n){var i=(0,f.Z)((0,F.C)(e,n),2),s=i[0],o=i[1],c=(0,R.Zl)(M),u=(0,a.useCallback)((function(){o(e,!0)}),[e,o]);return(0,a.useEffect)((function(){var n;c((function(i){return(0,l.Z)((0,r.Z)({},i),(0,_.Z)({},t,(0,m.Z)(null!==(n=null===i||void 0===i?void 0:i[t])&&void 0!==n?n:[]).concat([function(){return o(e,!0)}])))}))}),[t,c]),[s,o,u]}var P=n(61045),T=n(79232),H=n(66979),L=["Mais baratos","Mais caros","Mais recentes","Mais antigos"],q=["asc","desc","newest","oldest"],A=[{label:"Com negocia\xe7\xf5es",name:"in_market",needsLogin:!1},{label:"Sem negocia\xe7\xf5es",name:"not_in_market",needsLogin:!1},{label:"Possuo",name:"redeemed",needsLogin:!0},{label:"N\xe3o Possuo",name:"not_redeemed",needsLogin:!1}],B=["Normal + Secretos","Normal","Secretos"],I=(0,a.forwardRef)((function(e,t){var n=e.showFirstState,o=e.priceFilterState,c=e.rarityFilterState,d=e.ownerShipAndNegotiationState,x=e.selectedStudiosState,w=e.mobileFilterOpen,S=e.reset,k=e.closeMobileFilter,Z=e.availableFilters,_=(0,s.useRouter)(),F=(0,R.Zl)(T.g4),M=(0,f.Z)(o,1)[0],E=(0,f.Z)(c,2),I=E[0],O=E[1],z=(0,a.useMemo)((function(){return d}),[d]),D=z[0],U=z[1],X=(0,P.Y)(x).StudioSelector,W=(0,a.useCallback)((function(){return(0,i.jsxs)("div",{className:"flex absolute -top-2 justify-between w-full",children:[(0,i.jsx)("p",{children:M[0]}),(0,i.jsx)("p",{children:M[1]>=1e3?"1000+":M[1]})]})}),[M]),Y=(0,a.useMemo)((function(){return{"SHOW-FIRST":(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("p",{onClick:function(){return t.current.submitForm()},className:"text-14 font-semibold leading-5 text-white",children:"Mostrar primeiro"}),(0,i.jsx)(g.BX,{state:[n[0],n[1]],children:function(e){var t=e.selectedIndex,r=e.setSelectedIndex;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b.Z,{name:"order",value:q[n[0]]}),L.map((function(e,n){return(0,i.jsxs)("div",{onClick:function(){return r(n)},className:"flex gap-2 items-center cursor-pointer",children:[(0,i.jsx)("div",{className:"p-[0.188rem] w-5 h-5 rounded-full border-2 ".concat(t===n?"border-golden-base":"border-white"),children:t===n&&(0,i.jsx)("div",{className:"w-full h-full bg-golden-base rounded-full"})}),(0,i.jsx)("p",{className:"text-14 font-medium text-white",children:e})]},"radio-option-".concat(e))}))]})}})]}),PRICE:(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsx)("p",{className:"text-14 font-semibold leading-5 text-white",children:"Pre\xe7o (Sparks)"}),(0,i.jsxs)("div",{className:"flex relative flex-col gap-0.5 w-full",children:[(0,i.jsx)(W,{}),(0,i.jsx)(g.Ii,{name:"value",controlledState:[o[0],o[1]],maxValue:1e3})]})]}),RARITY:(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsx)("p",{className:"text-14 font-semibold leading-5 text-white",children:"Raridade"}),(0,i.jsx)(b.Z,{name:"has_normal",value:("Normal"===I||"Normal + Secretos"===I).toString()}),(0,i.jsx)(b.Z,{name:"has_secret",value:("Secretos"===I||"Normal + Secretos"===I).toString()}),(0,i.jsx)(j.rd,{dontRegister:!0,ignoreSearch:!0,full:!0,value:I,inputClassName:"cursor-pointer",onChange:function(e){return O(e.target.value)},type:"button",minDrawerHeight:0,name:"rarity",options:B})]}),SHOW:(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsx)("p",{className:"text-14 font-semibold leading-5 text-white",children:"Exibir"}),A.map((function(e){var t=e.label,n=e.name,r=e.needsLogin;return(0,i.jsx)(i.Fragment,{children:(!r||H.I.currentUser)&&(0,i.jsx)(p.MM,{name:n,controlledState:[D.includes(t),function(e){return U((function(n){return e?(0,m.Z)(n).concat([t]):n.filter((function(e){return e!==t}))}))}],checkBoxColor:"golden-base",textSize:14,label:t},"market-checkbox-".concat(n))})}))]}),STUDIO:X}}),[W,X,t,D,o,I,U,O,n]);return(0,a.useEffect)((function(){var e=function(){F((function(e){return(0,l.Z)((0,r.Z)({},e),{navbarHidden:!1})}))};return _.events.on("routeChangeStart",e),function(){return _.events.off("routeChangeStart",e)}}),[_.events,F]),(0,i.jsxs)(i.Fragment,{children:[w&&(0,i.jsx)("div",{className:"flex md:hidden fixed bottom-0 left-0 justify-center items-center py-3 px-4 w-full bg-ui-darker z-[56]",children:(0,i.jsx)(v.X4,{onClick:(0,u.Z)((function(){return(0,h.__generator)(this,(function(e){switch(e.label){case 0:return[4,_.replace("".concat(_.asPath.split("?")[0]).concat((0,N.XT)(t.current.getData())),void 0,{shallow:!0})];case 1:return e.sent(),k(),[2]}}))})),color:"primary",className:"w-full text-14 font-bold text-white",children:"Aplicar"})}),(0,i.jsx)("div",{className:"".concat(w?"flex":"hidden md:flex"," flex-col gap-3 h-full"),children:(0,i.jsxs)(C.l,{placeholder:void 0,onSubmit:function(){return null},ref:t,className:"".concat(w?"block":"hidden"," h-full md:h-auto top-0 left-0 z-[55] md:z-auto fixed md:relative md:block overflow-y-auto flex-shrink-0 pt-5 bg-ui-darker rounded w-full md:w-[16.75rem]"),children:[(0,i.jsx)("div",{className:"flex justify-center px-5 w-full h-full leading-4 text-white pb-[3.125rem]",children:(0,i.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-3 mb-4.5 md:mb-0",children:[(0,i.jsx)("div",{className:"flex md:hidden justify-end items-center w-full h-7 text-white",children:(0,i.jsx)(y.T,{onClick:k,className:"w-4 h-4 cursor-pointer"})}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("p",{className:"md:hidden text-20 font-semibold leading-5 text-ui-lightest",children:"Filtrar"}),(0,i.jsx)("p",{onClick:function(){S(),_.asPath.split("?")[0]!==_.asPath&&_.replace(_.asPath.split("?")[0],void 0,{shallow:!1})},className:"text-14 font-semibold text-ui-lightest underline uppercase cursor-pointer",children:"Limpar Tudo"})]})]}),Z.map((function(e,t){return(0,i.jsxs)(i.Fragment,{children:[Y[e],t!==Z.length-1&&(0,i.jsx)("div",{className:"w-full h-0.5 bg-ui-dark"})]})}))]})}),w&&(0,i.jsx)("div",{className:"w-full h-23"})]})})]})}));function O(e,t){var n=(0,R.Zl)(T.g4),o=function(){var e=(0,R.sJ)(M),t=(0,R._8)((function(e){var t=e.snapshot;return function(){var e=(0,u.Z)((function(e){var n;return(0,h.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.getPromise(M)];case 1:return(null===(n=r.sent())||void 0===n?void 0:n[e])&&n[e].forEach((function(e){e()})),[2]}}))}));return function(t){return e.apply(this,arguments)}}()}),[]);return{stateResetGroup:e,resetAllStates:t}}().resetAllStates,f=(0,c.aC)(),m=f.atomicAuthUser,v=f.atomicLoadingSession,g=(0,a.useRef)(),p=(0,s.useRouter)(),b=(0,a.useState)(!1),j=b[0],C=b[1],y="marketFilters",_=(0,a.useState)(null),F=_[0],P=_[1],H=(0,a.useCallback)((0,u.Z)((function(){return(0,h.__generator)(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e){return setTimeout((function(){return e(P(null))}),200)}))];case 1:return e.sent(),[4,new Promise((function(e){return setTimeout((function(){return e(P(500))}),200)}))];case 2:return e.sent(),[2]}}))})),[]),L=E(0,y,H),q=E([0,1e3],y,H),B=E("Normal + Secretos",y,H),O=E(A.filter((function(e){return!1===e.needsLogin})).map((function(e){return e.label})),y,H),z=E([],y,H),D=(0,a.useState)(!1),U=D[0],X=D[1],W=(0,a.useState)(null),Y=W[0],G=W[1],J=(0,w.T)().handleToast,K=(0,a.useCallback)((0,u.Z)((function(){return(0,h.__generator)(this,(function(e){return x.UA||p.replace("".concat(p.asPath.split("?")[0]).concat((0,N.XT)(g.current.getData())),void 0,{shallow:!0}),[2]}))})),[p]),V=(0,a.useCallback)((0,u.Z)((function(){var e,t,n,r,l;return(0,h.__generator)(this,(function(i){switch(i.label){case 0:C(!0),e=p.query,e.redeemed,t=(0,d.Z)(e,["redeemed"]),i.label=1;case 1:return i.trys.push([1,6,,7]),r=[m?e:t,null===m||void 0===m?void 0:m.email],m?[4,m.getIdToken()]:[3,3];case 2:return l=i.sent(),[3,4];case 3:l=void 0,i.label=4;case 4:return[4,S.dm.apply(void 0,r.concat(l))];case 5:return n=i.sent(),[3,7];case 6:return i.sent(),n=[[]],J("Erro no mercado, tente novamente mais tarde","error"),G(n),[2,C(!1)];case 7:return(!(null===n||void 0===n?void 0:n[0])||(null===n||void 0===n?void 0:n[0].length)<=0)&&J("Nenhum resultado encontrado","error"),G(n),C(!1),[2]}}))})),[m,J,p.query]);(0,k.K)((function(){K()}),F);var Q=(0,a.useCallback)((function(){o(y),G([[]])}),[o]);return(0,a.useEffect)((function(){p.isReady&&!v&&(Object.keys(p.query).length>0?V():G([[]]))}),[V,v,p.isReady,p.query]),(0,a.useEffect)((function(){p.isReady&&"/market"===p.asPath&&Q()}),[Q,p.asPath,p.isReady]),(0,a.useEffect)((function(){var e,n;L[1]((null===t||void 0===t?void 0:t.order)?"desc"===t.order?0:1:0,!0),((null===t||void 0===t?void 0:t.min_value)||(null===t||void 0===t?void 0:t.max_value))&&q[1]([null!==(e=null===t||void 0===t?void 0:t.min_value)&&void 0!==e?e:0,null!==(n=null===t||void 0===t?void 0:t.max_value)&&void 0!==n?n:1e3],!0),((null===t||void 0===t?void 0:t.has_normal)||(null===t||void 0===t?void 0:t.has_secret))&&B[1](t?"true"===t.has_normal&&"true"===t.has_secret?"Normal + Secretos":"true"===t.has_normal?"Normal":"Secretos":"Normal + Secretos",!0),O[1](A.filter((function(e){return t?(null===t||void 0===t?void 0:t[e.name])&&"true"===t[e.name]:!1===e.needsLogin})).map((function(e){return e.label})),!0),(null===t||void 0===t?void 0:t.studios)&&z[1](t.studios.split(","),!0)}),[]),{MobileFilterButton:(0,i.jsxs)("div",{onClick:function(){n((function(e){return(0,l.Z)((0,r.Z)({},e),{navbarHidden:!0})})),X(!0)},className:"flex md:hidden gap-2 items-center cursor-pointer",children:[(0,i.jsx)(Z.k,{}),(0,i.jsx)("p",{className:"text-14 font-semibold text-ui-lightest",children:"Filtrar"})]}),MarketFilterTab:e?(0,i.jsx)(I,{ref:g,availableFilters:e,reset:Q,closeMobileFilter:function(){X(!1),n((function(e){return(0,l.Z)((0,r.Z)({},e),{navbarHidden:!1})}))},mobileFilterOpen:U,showFirstState:L,priceFilterState:q,rarityFilterState:B,ownerShipAndNegotiationState:O,selectedStudiosState:[z[0],z[1]]}):(0,i.jsx)(i.Fragment,{}),resultingBadges:Y,loading:j}}function z(e){var t=e.children,n=e.availableFilters,l=e.onLoadingStateChange,s=e.onBadgesLoaded,u=e.queries,d=(0,c.aF)().atomicLoadingSession,f=O(n,u),m=f.MarketFilterTab;return(0,a.useEffect)((function(){f.resultingBadges&&s&&s(f.resultingBadges)}),[f.resultingBadges,s]),(0,a.useEffect)((function(){l&&l(f.loading)}),[f.loading,l]),(0,i.jsx)("div",{className:"w-full ".concat(d?"h-full":""," flex gap-5 items-start xl1:px-0 md:px-2 pb-[6.25rem]"),children:d?(0,i.jsx)("div",{className:"flex justify-center items-center w-full h-full",children:(0,i.jsx)(o.Zi,{size:128})}):(0,i.jsxs)(i.Fragment,{children:[m,t((0,r.Z)({},f))]})})}function D(e){var t=(0,a.useState)("initial"),n=t[0],o=t[1],c=(0,s.useRouter)();return(0,a.useEffect)((function(){c.isReady&&o(0===Object.keys(c.query).length?void 0:c.query)}),[c.isReady,c.query]),(0,i.jsx)(i.Fragment,{children:"initial"!==n&&(0,i.jsx)(z,(0,l.Z)((0,r.Z)({},e),{queries:n}))})}},27330:function(e,t,n){n.d(t,{k:function(){return i}});var r=n(85893),l=(0,r.jsx)("path",{d:"M10.7502 18.7C10.4169 18.7 10.1377 18.5875 9.9127 18.3625C9.6877 18.1375 9.5752 17.8584 9.5752 17.525C9.5752 17.1917 9.6877 16.9125 9.9127 16.6875C10.1377 16.4625 10.4169 16.35 10.7502 16.35H13.2502C13.5835 16.35 13.8627 16.4625 14.0877 16.6875C14.3127 16.9125 14.4252 17.1917 14.4252 17.525C14.4252 17.8584 14.3127 18.1375 14.0877 18.3625C13.8627 18.5875 13.5835 18.7 13.2502 18.7H10.7502ZM3.7502 7.65002C3.41686 7.65002 3.1377 7.53752 2.9127 7.31252C2.6877 7.08752 2.5752 6.80836 2.5752 6.47502C2.5752 6.14169 2.6877 5.85836 2.9127 5.62502C3.1377 5.39169 3.41686 5.27502 3.7502 5.27502H20.2502C20.5835 5.27502 20.8627 5.39169 21.0877 5.62502C21.3127 5.85836 21.4252 6.14169 21.4252 6.47502C21.4252 6.80836 21.3127 7.08752 21.0877 7.31252C20.8627 7.53752 20.5835 7.65002 20.2502 7.65002H3.7502ZM6.7502 13.175C6.41686 13.175 6.1377 13.0625 5.9127 12.8375C5.6877 12.6125 5.5752 12.3334 5.5752 12C5.5752 11.6667 5.6877 11.3875 5.9127 11.1625C6.1377 10.9375 6.41686 10.825 6.7502 10.825H17.2502C17.5835 10.825 17.8627 10.9375 18.0877 11.1625C18.3127 11.3875 18.4252 11.6667 18.4252 12C18.4252 12.3334 18.3127 12.6125 18.0877 12.8375C17.8627 13.0625 17.5835 13.175 17.2502 13.175H6.7502Z",fill:"currentColor"});function i(e){var t=e.color,n=void 0===t?"white":t,i=e.width,a=void 0===i?24:i,s=e.height,o=void 0===s?24:s;return(0,r.jsx)("svg",{style:{color:n},width:a,height:o,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l})}}}]);