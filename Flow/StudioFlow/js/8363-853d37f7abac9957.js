"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8363],{20503:function(e,t,n){n.d(t,{Yy:function(){return M}});var a=n(47568),s=n(26042),r=n(69396),l=n(97582),i=n(85893),c=n(67294),o=n(8193),d=n(89583),u=n(5434),x=n(11265),m=n(89754),p=n(66525),h=n(50101),f=n(83122),g=n(43031),j=n(26758),b=n(97224),v=n(78519),y=n(60851),N=n(57779),w=n(37548),k=n(28256),C=n(66979),S=n(30120),E={"payment-pix":{icon:(0,i.jsx)(v.Fc,{size:20,className:"text-pix"}),label:"PIX",description:"Aprovado em at\xe9 10 minutos"},"payment-card":{icon:(0,i.jsx)(d._02,{size:16}),label:"Cart\xe3o de cr\xe9dito"},"payment-bill":{icon:(0,i.jsx)(o.iX,{size:18}),label:"Boleto",description:"Aprovado em at\xe9 3 dias \xfateis"},"payment-sparks":{icon:(0,i.jsx)(v.sN,{width:18,height:18}),label:"Sparks"}};function P(e,t){return"**** ".concat(e.substring(e.length-4,e.length)," ").concat(t?"| ".concat(t):"")}function V(e){var t,n=e.paymentMethod,a=e.card,s=e.insufficientSparks,r=void 0!==s&&s;return(0,i.jsxs)("div",{className:"flex gap-2 items-center -mt-px text-14 select-none",children:[(0,i.jsx)("div",{className:"flex justify-center items-center w-8 h-8 bg-ui-base rounded-full skeletable round-full",children:a?(0,i.jsx)("embed",{width:"22",height:"14",src:"https://cdn.flowpodcast.com.br/assets/svg_icons/cards/".concat(a.brand,".svg"),type:"image/svg+xml"}):n.icon}),(0,i.jsxs)("div",{className:"flex flex-col gap-1 skeletable round",children:[!a&&(0,i.jsx)("span",{className:"text-14",children:n.label}),r&&(0,i.jsx)("span",{className:"text-12 text-alert-light",children:"Seu saldo \xe9 insuficiente"}),n.description&&(0,i.jsx)("span",{className:"text-12 text-ui-lightest",children:!a&&n.description}),a&&P(null!==(t=a.last_card_numbers)&&void 0!==t?t:"****",a.label?(0,b.QT)(a.label,12):"")]})]})}var _=(0,c.forwardRef)((function(e,t){var n=e.isCardDrawerOpen,a=e.setIsCardDrawerOpen,r=e.drawerStyle,l=e.pinnedElementStyle,c=e.immuneElements,o=e.children,d=e.uniqueCard,x=void 0!==d&&d;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{children:[n?(0,i.jsx)(u.DJ5,{size:24,color:"text-ui-white"}):(0,i.jsx)(u.x3N,{size:24,color:"text-ui-white"}),n&&!x&&(0,i.jsx)(w.c,{immuneElements:c,handleBlur:function(){return setTimeout((function(){return a(!1)}),100)}}),!x&&(0,i.jsx)("div",{ref:t,className:"overflow-auto ".concat(x?"":"fixed"," z-10 py-3 text-ui-white bg-ui-dark rounded-b shadow-12dp"),style:(0,s.Z)({},r,l),children:o},"card-container-".concat(n))]})})}));function M(e){var t=e.options,n=e.onClick,o=e.productAmountInSparks,d=e.cards,u=e.openPage,w=e.nextPage,M=e.updateContext,F=e.initialIndex,A=e.initialCreditCard,I=e.hasUniqueCard,R=void 0!==I&&I,H=e.full,Z=void 0!==H&&H,B=e.loading,L=void 0!==B&&B,T=e.planName,z=void 0===T?"":T,O=(0,c.useState)(null),X=O[0],D=O[1],q=(0,c.useState)(A),Q=q[0],U=q[1],W=(0,c.useState)(),Y=W[0],J=W[1],K=(0,c.useState)(!1),$=K[0],G=K[1],ee=(0,k.T)().openLayoutModal,te=(0,p.B)().sparks,ne=(0,c.useState)(!1),ae=ne[0],se=ne[1],re=(0,c.useRef)(),le=(0,c.useRef)(),ie=(0,c.useRef)(),ce=(0,c.useRef)(),oe=(0,m.F)(),de=oe.pin,ue=oe.unpin,xe=oe.pinnedElementStyle,me=(0,c.useCallback)((function(e){n(e,Q),se("payment-card"===e&&function(e){return!e})}),[Q,n]),pe=(0,c.useCallback)(function(){var e=(0,a.Z)((function(e){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,(0,g.F)(j.o,ce,e,(0,a.Z)((function(){var t,n,a,i,c,o;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t=e.cardNumber,n=e.holderName,a=e.securityCode,i=e.expiring_date,c=i.split("/"),G(!0),[4,C.I.currentUser.getIdToken()];case 1:return[4,h.EY.apply(void 0,[l.sent(),{email:C.I.currentUser.email,label:null,expirationMonth:parseInt(c[0],10),expirationYear:parseInt(S.ou.fromFormat(c[1],4===c[1].length?"yyyy":"yy").toFormat("yyyy")),origin:"NV99-STORE",cardNumber:t,holderName:n,securityCode:a}])];case 2:return o=l.sent(),M((function(e){return(0,r.Z)((0,s.Z)({},e),{currentUniqueCard:o,cart:(0,r.Z)((0,s.Z)({},e.cart),{selectedPaymentMethod:"payment-card",selectedCreditCard:o})})})),w(),[2]}}))})),(function(){return ce.current.setErrors({cardNumber:"Dados Inv\xe1lidos.",holderName:" ",expiring_date:" ",securityCode:" "})}))];case 1:return t.sent(),G(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[w,M]);return(0,c.useEffect)((function(){D(o>te.balance)}),[o,te.balance]),(0,c.useLayoutEffect)((function(){J({display:ae?"flex":"none",width:"".concat(le.current.offsetWidth/16,"rem")})}),[ae]),(0,c.useLayoutEffect)((function(){ae?de(re.current,ie.current):ue()}),[ae,de,ue]),(0,i.jsx)(N.BX,{initialIndex:F,children:function(e){var a=e.selectedIndex,s=e.setSelectedIndex;return(0,i.jsx)("div",{ref:le,className:"flex ".concat(null===X?"skeleton":""," flex-col gap-2 ").concat(Z?"w-full":"max-w-[19.25rem]"),children:t.map((function(e,t){return(0,i.jsxs)("div",{ref:"payment-card"===e?ie:void 0,children:[(0,i.jsxs)("div",{onClick:function(n){n.stopPropagation(),s(t),me(e)},className:"flex gap-3 cursor-pointer items-center p-3 w-full h-15 text-ui-white bg-ui-darker ".concat("payment-sparks"===e&&o>te.balance?"rounded-t":"rounded"),children:[(0,i.jsx)("div",{className:"flex justify-center items-center w-6 h-6 rounded-full border-2 border-ui-white select-none skeletable round-full",children:(0,i.jsx)("div",{className:"".concat(a===t?"bg-ui-white":"bg-ui-darker","  select-none rounded-full w-3 h-3")})}),(0,i.jsxs)("div",{id:"paymentMethod-".concat(e),className:"flex justify-between items-center w-[87%]",children:[(0,i.jsx)(V,{card:"payment-card"===e&&Q,paymentMethod:E[e],insufficientSparks:"payment-sparks"===e&&o>te.balance}),"payment-card"===e&&(0,i.jsx)(_,{ref:re,uniqueCard:R,isCardDrawerOpen:ae,setIsCardDrawerOpen:se,immuneElements:[re.current,le.current,ce.current],drawerStyle:Y,pinnedElementStyle:xe,children:R?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)("ol",{className:"w-full select-none max-h-[250px]",children:L?(0,i.jsx)("div",{className:"flex justify-center w-full",children:(0,i.jsx)(y.tx,{color:"white",size:24})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("li",{onClick:function(){return u("CreateCardModal")},className:"flex items-center pl-3 text-16 text-ui-lightest hover:bg-ui-darker cursor-pointer py-[0.875rem]",children:"Adicionar cart\xe3o"}),null!==d&&"initial"!==d?d.map((function(e,t){return(0,i.jsxs)("li",{onClick:function(t){"NV99-PP"===e.origin&&(U(e),t.stopPropagation(),n("payment-card",e),se(!1))},className:"".concat("NV99-PP"!==e.origin?"opacity-70 pointer-events-none":"cursor-pointer"," flex gap-2 items-center pl-3 text-14 hover:bg-ui-darker py-[0.875rem]"),children:[(0,i.jsx)("div",{className:"flex flex-shrink-0 justify-center items-center w-8 h-8 bg-ui-base rounded-full skeletable round",children:(0,i.jsx)("embed",{width:"22",height:"14",src:"https://cdn.flowpodcast.com.br/assets/svg_icons/cards/".concat(e.brand,".svg"),type:"image/svg+xml"})}),e&&P(e.last_card_numbers,e.label?(0,b.QT)(e.label,12):"")]},"card-".concat(t))})):null===d?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(y.tx,{color:"white"})]})})})]})]}),"payment-card"===e&&R&&ae&&(0,i.jsxs)(f.l,{placeholder:void 0,onSubmit:pe,ref:ce,className:"flex flex-col gap-4 px-3 pt-2 pb-5 text-ui-white bg-ui-dark rounded-b",children:[(0,i.jsx)(N.tk,{labelAsPlaceholder:!0,hideErrorMargin:!0,noLayoutShift:!0,full:!0,name:"holderName",label:"Nome impresso no cart\xe3o"}),(0,i.jsx)(N.tk,{labelAsPlaceholder:!0,hideErrorMargin:!0,noLayoutShift:!0,full:!0,name:"cardNumber",label:"N\xfamero do cart\xe3o"}),(0,i.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,i.jsx)(N.tk,{labelAsPlaceholder:!0,hideErrorMargin:!0,noLayoutShift:!0,full:!0,name:"expiring_date",label:"Validade"}),(0,i.jsx)(N.tk,{labelAsPlaceholder:!0,hideErrorMargin:!0,noLayoutShift:!0,full:!0,name:"securityCode",label:"CVV"})]}),(0,i.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,i.jsx)(x.X4,{onClick:function(){return se(!1)},disabled:{status:!!$&&"disabled-light"},fluidWidth:"6.25rem",color:"dark",children:"Voltar"}),(0,i.jsx)(x.X4,{onClick:function(){return ce.current.submitForm()},disabled:{status:!!$&&"disabled-light"},fluidWidth:"7.5rem",color:"confirmation",children:$?(0,i.jsx)(y.tx,{size:14,color:"white"}):"Confirmar"})]})]}),"payment-sparks"===e&&o>te.balance&&X&&(0,i.jsxs)("div",{className:"flex flex-col gap-3 p-3 w-full text-14 text-ui-white bg-ui-dark max-w-[19.25rem] max-h-[19.5rem]",children:[(0,i.jsxs)("p",{className:"leading-5.5",children:["Voc\xea possui: ",(0,i.jsxs)("span",{className:"font-bold text-golden-base",children:[te.balance," Sparks"]})," atualmente s\xe3o necess\xe1rios mais ",(0,i.jsx)("span",{className:"font-bold text-golden-base",children:(o-te.balance).toFixed(2)})," ",R?"para comprar":"para assinar o plano"," ",(0,i.jsx)("span",{className:"font-bold text-golden-base",children:z})]}),(0,i.jsxs)(x.X4,{onClick:function(){ee("BuySparks")},color:"base",className:"flex gap-2 justify-center items-center h-10",children:[(0,i.jsx)(v.sN,{}),"Comprar Sparks"]})]})]},"option-".concat(t))}))})}})}},51792:function(e,t,n){n.d(t,{n:function(){return r}});var a=n(85893),s=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("path",{d:"M0.666016 0.333252H2.33268V13.6666H0.666016V0.333252ZM3.99935 0.333252H4.83268V13.6666H3.99935V0.333252ZM5.66602 0.333252H7.33268V13.6666H5.66602V0.333252ZM8.16602 0.333252H9.83268V13.6666H8.16602V0.333252ZM10.666 0.333252H12.3327V13.6666H10.666V0.333252ZM13.166 0.333252H13.9993V13.6666H13.166V0.333252ZM14.8327 0.333252H17.3327V13.6666H14.8327V0.333252Z",fill:"white"})});function r(e){var t=e.className,n=void 0===t?"text-ui-white":t,r=e.size,l=void 0===r?16:r;return(0,a.jsx)("svg",{className:n,width:l.toString(),height:l.toString(),viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s})}},75660:function(e,t,n){n.d(t,{I:function(){return l}});var a=n(85893),s=n(60851),r=n(4646);function l(e){var t=e.onClick,n=e.address,l=e.title,i=e.multipleBillings,c=void 0!==i&&i,o=e.loading,d=void 0!==o&&o;return(0,a.jsx)(r.P,{optionClassName:"py-3 px-4",title:(0,a.jsxs)("div",{className:"flex gap-2 items-center w-full",children:[(0,a.jsx)("p",{className:"text-12 md:text-14",children:l||"Dados de cobran\xe7a:"}),!c&&(0,a.jsx)("p",{onClick:function(){return t()},className:"text-12 underline uppercase cursor-pointer",children:"ALTERAR"})]}),children:(0,a.jsxs)("div",{className:"flex flex-col gap-3 py-0.5 w-full",children:[d&&(0,a.jsx)(s.tx,{color:"white",size:64}),!d&&(0,a.jsx)(a.Fragment,{children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{style:{lineBreak:"anywhere"},className:"text-12 md:text-14 font-normal leading-4 md:leading-4.5 text-white break-words line-clamp-3",children:["Rua:"," ",n.street.replace(/Rua /i,"")," ",n.street_number," ","".concat(n.complement?", ".concat(n.complement):"")]}),(0,a.jsxs)("p",{style:{lineBreak:"anywhere"},className:"text-12 md:text-14 font-normal leading-4 md:leading-4.5 text-white line-clamp-1",children:["Cidade:"," ",n.city]}),(0,a.jsxs)("p",{style:{lineBreak:"anywhere"},className:"text-12 md:text-14 font-normal leading-4 md:leading-4.5 text-white line-clamp-1",children:["Bairro:"," ",n.neighborhood]}),(0,a.jsxs)("p",{style:{lineBreak:"anywhere"},className:"text-12 md:text-14 font-normal leading-4 md:leading-4.5 text-white line-clamp-1",children:["CEP:"," ",n.zipcode]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("p",{className:"text-12 font-semibold leading-3 text-alert-light",children:"Adicione um endere\xe7o"})})})]})})}},72398:function(e,t,n){n.d(t,{$:function(){return r}});var a=n(85893),s=(n(67294),n(78519));function r(e){var t=e.children;return(0,a.jsx)("div",{className:"flex flex-col gap-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[t.map&&t.map((function(e,t){return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[e,(0,a.jsx)(s.EL,{height:1})]},"checkoutListItem ".concat(t))})),!t.map&&(0,a.jsx)(a.Fragment,{children:t})]})})}},20634:function(e,t,n){n.d(t,{Kp:function(){return o},XQ:function(){return u}});var a=n(85893),s=n(67294),r=n(97224),l=n(51792),i=n(78519),c=n(4646);function o(e){var t=e.cards,n=e.className,r=void 0===n?"":n;return(0,s.useMemo)((function(){return(null===t||void 0===t?void 0:t.length)>0&&0===(null===t||void 0===t?void 0:t.filter((function(e){return"NV99-PP"===e.origin})).length)}),[t])?(0,a.jsxs)("div",{className:"".concat(r," text-12 font-bold text-center text-alert-light uppercase"),children:["ser\xe1 necess\xe1rio adicionar um novo ",(0,a.jsx)("br",{}),"cart\xe3o de cr\xe9dito"]}):null}function d(e){var t=e.selectedPaymentMethod,n="payment-card-sparks"===t?"payment-sparks":t,s=t;return(0,a.jsxs)(a.Fragment,{children:[n.credit_card_id&&(0,a.jsxs)("div",{className:"flex flex-row items-center py-0.5 animate-appear",children:[(0,a.jsx)("div",{className:"flex justify-center items-center py-3 px-2 mr-3 w-10 h-10 bg-ui-base rounded-full skeletable round",children:(0,a.jsx)("embed",{width:"22",height:"14",src:"https://cdn.flowpodcast.com.br/assets/svg_icons/cards/".concat(s.brand,".svg"),type:"image/svg+xml"})}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsx)("span",{className:"text-12 md:text-14 font-medium text-white skeletable round",children:"**** ".concat(s.last_card_numbers.slice(-4)," ").concat(s.label?"| ".concat((0,r.QT)(s.label,12)):"")})}),"NV99-PP"!==(null===s||void 0===s?void 0:s.origin)&&"NV99-STORE"!==(null===s||void 0===s?void 0:s.origin)&&(0,a.jsx)("span",{className:"absolute top-1 right-1 px-1 text-12 font-bold text-ui-white bg-alert-base py-[0.125rem]",children:"ALTERE O CART\xc3O"})]}),"payment-pix"===n&&(0,a.jsxs)("div",{className:"flex gap-2 items-center -mt-px text-14",children:[(0,a.jsx)("div",{className:"flex justify-center items-center w-8 h-8 bg-ui-base rounded-full",children:(0,a.jsx)(i.Fc,{})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("p",{className:"text-14 font-medium leading-5 text-white",children:"PIX"}),(0,a.jsx)("p",{className:"text-12 font-normal leading-3 text-ui-lightest",children:"Aprovado em at\xe9 10 minutos."})]})]}),"payment-sparks"===n&&(0,a.jsxs)("div",{className:"flex gap-2 items-center -mt-px text-14",children:[(0,a.jsx)(i.sN,{})," Sparks"]}),"payment-bill"===n&&(0,a.jsxs)("div",{className:"flex gap-2 items-center -mt-px text-14",children:[(0,a.jsx)("div",{className:"flex justify-center items-center pt-0.5 pr-px w-8 h-8 bg-ui-base rounded-full",children:(0,a.jsx)(l.n,{})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("p",{className:"text-14 font-medium leading-5 text-white",children:"Boleto"}),(0,a.jsx)("p",{className:"text-12 font-normal leading-3 text-ui-lightest",children:"Aprovado em at\xe9 3 dias \xfateis."})]})]})]})}function u(e){var t=e.onClick,n=e.selectedPaymentMethod;return(0,a.jsx)(c.P,{optionClassName:"py-3.5 px-3 relative h-15 flex items-center",title:(0,a.jsxs)("div",{className:"flex gap-2 items-center w-full",children:[(0,a.jsx)("p",{className:"text-12 md:text-14",children:"Forma de pagamento:"}),(0,a.jsx)("p",{onClick:function(){return t()},className:"text-12 underline uppercase cursor-pointer",children:"ALTERAR"})]}),children:n&&(0,a.jsx)(d,{selectedPaymentMethod:n})})}}}]);